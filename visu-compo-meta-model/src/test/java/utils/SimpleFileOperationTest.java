package utils;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import java.io.*;
import java.time.Clock;

import utils.FileOperation;

import static org.junit.Assert.assertEquals;

/**
 * Created by Ivan Logre on 24/06/2014.
 */
public class SimpleFileOperationTest {

    private File file;
    private Writer writer;
    private String fileName = "./imatest";

    @Before
    public void setUp() throws IOException {
        file = new File(fileName);
        boolean test = false;
        test = file.createNewFile();
        test = file.setWritable(true);
        writer = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(fileName),"utf-8"));
    }


    @Test
    public void testReadFileContainingStringToString() {
        String common = "imatest";
        try {
            writer.write(common);
            writer.flush();
        } catch (IOException e) {
            e.printStackTrace();
        }
        assertEquals(common, FileOperation.getStringFromLocalFile(fileName));
    }

    @Test
    public void testReadFileContainingJSONToString() {
        String common = "{\"bn\":\"EBike1/ctrl_tempd2\",\"bt\":1338740136,\"e\":[{\"t\":0,\"v\":19},{\"t\":1,\"v\":21}]}";
        try {
            writer.write(common);
            writer.flush();
        } catch (IOException e) {
            e.printStackTrace();
        }
        assertEquals(common, FileOperation.getStringFromLocalFile(fileName));
    }

    @Test
    public void testReadRemoteFileContainingJSONToString() {
        String common = "{\"bn\":\"EBike1/ctrl_tempd2\",\"bt\":1338740136,\"e\":[{\"t\":0,\"v\":19},{\"t\":1,\"v\":21},{\"t\":2,\"v\":20},{\"t\":3,\"v\":20},{\"t\":4,\"v\":23},{\"t\":5,\"v\":22},{\"t\":6,\"v\":25},{\"t\":7,\"v\":20},{\"t\":8,\"v\":20},{\"t\":9,\"v\":24},{\"t\":10,\"v\":19},{\"t\":11,\"v\":23},{\"t\":12,\"v\":24},{\"t\":13,\"v\":20},{\"t\":14,\"v\":25},{\"t\":15,\"v\":22},{\"t\":16,\"v\":20},{\"t\":17,\"v\":25},{\"t\":18,\"v\":21},{\"t\":19,\"v\":21},{\"t\":20,\"v\":24},{\"t\":21,\"v\":19},{\"t\":22,\"v\":21},{\"t\":23,\"v\":19},{\"t\":24,\"v\":23},{\"t\":25,\"v\":25},{\"t\":26,\"v\":21},{\"t\":27,\"v\":21},{\"t\":28,\"v\":24},{\"t\":29,\"v\":22},{\"t\":30,\"v\":25},{\"t\":31,\"v\":19},{\"t\":32,\"v\":25},{\"t\":33,\"v\":20},{\"t\":34,\"v\":19},{\"t\":35,\"v\":23},{\"t\":36,\"v\":22},{\"t\":37,\"v\":22},{\"t\":38,\"v\":24},{\"t\":39,\"v\":22},{\"t\":40,\"v\":19},{\"t\":41,\"v\":25},{\"t\":42,\"v\":20},{\"t\":43,\"v\":21},{\"t\":44,\"v\":23},{\"t\":45,\"v\":24},{\"t\":46,\"v\":22},{\"t\":47,\"v\":25},{\"t\":48,\"v\":19},{\"t\":49,\"v\":23},{\"t\":50,\"v\":24},{\"t\":51,\"v\":19},{\"t\":52,\"v\":23},{\"t\":53,\"v\":25},{\"t\":54,\"v\":22},{\"t\":55,\"v\":23},{\"t\":56,\"v\":22},{\"t\":57,\"v\":21},{\"t\":58,\"v\":24},{\"t\":59,\"v\":22},{\"t\":60,\"v\":19},{\"t\":61,\"v\":20},{\"t\":62,\"v\":25},{\"t\":63,\"v\":19},{\"t\":64,\"v\":22},{\"t\":65,\"v\":23},{\"t\":66,\"v\":23},{\"t\":67,\"v\":21},{\"t\":68,\"v\":25},{\"t\":69,\"v\":20},{\"t\":70,\"v\":23},{\"t\":71,\"v\":21},{\"t\":72,\"v\":22},{\"t\":73,\"v\":24},{\"t\":74,\"v\":26},{\"t\":75,\"v\":22},{\"t\":76,\"v\":25},{\"t\":77,\"v\":21},{\"t\":78,\"v\":21},{\"t\":79,\"v\":24},{\"t\":80,\"v\":23},{\"t\":81,\"v\":25},{\"t\":82,\"v\":24},{\"t\":83,\"v\":24},{\"t\":84,\"v\":23},{\"t\":85,\"v\":26},{\"t\":86,\"v\":26},{\"t\":87,\"v\":23},{\"t\":88,\"v\":23},{\"t\":89,\"v\":27},{\"t\":90,\"v\":23},{\"t\":91,\"v\":25},{\"t\":92,\"v\":23},{\"t\":93,\"v\":27},{\"t\":94,\"v\":23},{\"t\":95,\"v\":26},{\"t\":96,\"v\":26},{\"t\":97,\"v\":22},{\"t\":98,\"v\":22},{\"t\":99,\"v\":32},{\"t\":100,\"v\":27},{\"t\":101,\"v\":21},{\"t\":102,\"v\":24},{\"t\":103,\"v\":26},{\"t\":104,\"v\":22},{\"t\":105,\"v\":23},{\"t\":106,\"v\":21},{\"t\":107,\"v\":30},{\"t\":108,\"v\":28},{\"t\":109,\"v\":22},{\"t\":110,\"v\":26},{\"t\":111,\"v\":27},{\"t\":112,\"v\":27},{\"t\":113,\"v\":24},{\"t\":114,\"v\":24},{\"t\":115,\"v\":21},{\"t\":116,\"v\":25},{\"t\":117,\"v\":24},{\"t\":118,\"v\":23},{\"t\":119,\"v\":17},{\"t\":120,\"v\":17},{\"t\":121,\"v\":25},{\"t\":122,\"v\":20},{\"t\":123,\"v\":24},{\"t\":124,\"v\":23},{\"t\":125,\"v\":21},{\"t\":126,\"v\":26},{\"t\":127,\"v\":23},{\"t\":128,\"v\":24},{\"t\":129,\"v\":21},{\"t\":130,\"v\":25},{\"t\":131,\"v\":26},{\"t\":132,\"v\":21},{\"t\":133,\"v\":28},{\"t\":134,\"v\":23},{\"t\":135,\"v\":23},{\"t\":136,\"v\":21},{\"t\":137,\"v\":22},{\"t\":138,\"v\":22},{\"t\":139,\"v\":20},{\"t\":140,\"v\":27},{\"t\":141,\"v\":23},{\"t\":142,\"v\":27},{\"t\":143,\"v\":22},{\"t\":144,\"v\":25},{\"t\":145,\"v\":25},{\"t\":146,\"v\":26},{\"t\":147,\"v\":25},{\"t\":148,\"v\":22},{\"t\":149,\"v\":25},{\"t\":150,\"v\":23},{\"t\":151,\"v\":22},{\"t\":152,\"v\":25},{\"t\":153,\"v\":21},{\"t\":154,\"v\":22},{\"t\":155,\"v\":27},{\"t\":156,\"v\":27},{\"t\":157,\"v\":26},{\"t\":158,\"v\":21},{\"t\":159,\"v\":26},{\"t\":160,\"v\":23},{\"t\":161,\"v\":23},{\"t\":162,\"v\":22},{\"t\":163,\"v\":27},{\"t\":164,\"v\":26},{\"t\":165,\"v\":25},{\"t\":166,\"v\":22},{\"t\":167,\"v\":23},{\"t\":168,\"v\":27},{\"t\":169,\"v\":28},{\"t\":170,\"v\":23},{\"t\":171,\"v\":27},{\"t\":172,\"v\":22},{\"t\":173,\"v\":26},{\"t\":174,\"v\":27},{\"t\":175,\"v\":27},{\"t\":176,\"v\":28},{\"t\":177,\"v\":23},{\"t\":178,\"v\":25},{\"t\":179,\"v\":22},{\"t\":180,\"v\":25},{\"t\":181,\"v\":26},{\"t\":182,\"v\":25},{\"t\":183,\"v\":25},{\"t\":184,\"v\":22},{\"t\":185,\"v\":28},{\"t\":186,\"v\":27},{\"t\":187,\"v\":27},{\"t\":188,\"v\":28},{\"t\":189,\"v\":27},{\"t\":190,\"v\":26},{\"t\":191,\"v\":27},{\"t\":192,\"v\":27},{\"t\":193,\"v\":28},{\"t\":194,\"v\":26},{\"t\":195,\"v\":28},{\"t\":196,\"v\":27},{\"t\":197,\"v\":26},{\"t\":198,\"v\":27},{\"t\":199,\"v\":28},{\"t\":200,\"v\":25},{\"t\":201,\"v\":25},{\"t\":202,\"v\":28},{\"t\":203,\"v\":27},{\"t\":204,\"v\":27},{\"t\":205,\"v\":24},{\"t\":206,\"v\":27},{\"t\":207,\"v\":27},{\"t\":208,\"v\":22},{\"t\":209,\"v\":23},{\"t\":210,\"v\":23},{\"t\":211,\"v\":25},{\"t\":212,\"v\":25},{\"t\":213,\"v\":28},{\"t\":214,\"v\":27},{\"t\":215,\"v\":28},{\"t\":216,\"v\":23},{\"t\":217,\"v\":25},{\"t\":218,\"v\":24},{\"t\":219,\"v\":27},{\"t\":220,\"v\":23},{\"t\":221,\"v\":27},{\"t\":222,\"v\":29},{\"t\":223,\"v\":24},{\"t\":224,\"v\":28},{\"t\":225,\"v\":30},{\"t\":226,\"v\":24},{\"t\":227,\"v\":27},{\"t\":228,\"v\":29},{\"t\":229,\"v\":25},{\"t\":230,\"v\":24},{\"t\":231,\"v\":25},{\"t\":232,\"v\":30},{\"t\":233,\"v\":26},{\"t\":234,\"v\":31},{\"t\":235,\"v\":27},{\"t\":236,\"v\":30},{\"t\":237,\"v\":24},{\"t\":238,\"v\":30},{\"t\":239,\"v\":27},{\"t\":240,\"v\":29},{\"t\":241,\"v\":26},{\"t\":242,\"v\":28},{\"t\":243,\"v\":31},{\"t\":244,\"v\":25},{\"t\":245,\"v\":30},{\"t\":246,\"v\":30},{\"t\":247,\"v\":31},{\"t\":248,\"v\":29},{\"t\":249,\"v\":28},{\"t\":250,\"v\":26},{\"t\":251,\"v\":28},{\"t\":252,\"v\":25},{\"t\":253,\"v\":29},{\"t\":254,\"v\":27},{\"t\":255,\"v\":27},{\"t\":256,\"v\":26},{\"t\":257,\"v\":29},{\"t\":258,\"v\":30},{\"t\":259,\"v\":25},{\"t\":260,\"v\":27},{\"t\":261,\"v\":32},{\"t\":262,\"v\":28},{\"t\":263,\"v\":26},{\"t\":264,\"v\":29},{\"t\":265,\"v\":29},{\"t\":266,\"v\":30},{\"t\":267,\"v\":26},{\"t\":268,\"v\":29},{\"t\":269,\"v\":28},{\"t\":270,\"v\":27},{\"t\":271,\"v\":29},{\"t\":272,\"v\":30},{\"t\":273,\"v\":26},{\"t\":274,\"v\":26},{\"t\":275,\"v\":27},{\"t\":276,\"v\":27},{\"t\":277,\"v\":26},{\"t\":278,\"v\":31},{\"t\":279,\"v\":25},{\"t\":280,\"v\":25},{\"t\":281,\"v\":27},{\"t\":282,\"v\":27},{\"t\":283,\"v\":26},{\"t\":284,\"v\":31},{\"t\":285,\"v\":26},{\"t\":286,\"v\":30},{\"t\":287,\"v\":28},{\"t\":288,\"v\":29},{\"t\":289,\"v\":29},{\"t\":290,\"v\":31},{\"t\":291,\"v\":27},{\"t\":292,\"v\":25},{\"t\":293,\"v\":30},{\"t\":294,\"v\":29},{\"t\":295,\"v\":28},{\"t\":296,\"v\":28},{\"t\":297,\"v\":26},{\"t\":298,\"v\":28},{\"t\":299,\"v\":27},{\"t\":300,\"v\":26},{\"t\":301,\"v\":29},{\"t\":302,\"v\":25},{\"t\":303,\"v\":27},{\"t\":304,\"v\":31},{\"t\":305,\"v\":26},{\"t\":306,\"v\":25},{\"t\":307,\"v\":31},{\"t\":308,\"v\":25},{\"t\":309,\"v\":26},{\"t\":310,\"v\":30},{\"t\":311,\"v\":30},{\"t\":312,\"v\":25},{\"t\":313,\"v\":28},{\"t\":314,\"v\":28},{\"t\":315,\"v\":26},{\"t\":316,\"v\":26},{\"t\":317,\"v\":27},{\"t\":318,\"v\":27},{\"t\":319,\"v\":30},{\"t\":320,\"v\":26},{\"t\":321,\"v\":31},{\"t\":322,\"v\":26},{\"t\":323,\"v\":28},{\"t\":324,\"v\":31},{\"t\":325,\"v\":27},{\"t\":326,\"v\":25},{\"t\":327,\"v\":31},{\"t\":328,\"v\":29},{\"t\":329,\"v\":31},{\"t\":330,\"v\":27},{\"t\":331,\"v\":31},{\"t\":332,\"v\":32},{\"t\":333,\"v\":31},{\"t\":334,\"v\":26},{\"t\":335,\"v\":30},{\"t\":336,\"v\":29},{\"t\":337,\"v\":31},{\"t\":338,\"v\":29},{\"t\":339,\"v\":28},{\"t\":340,\"v\":31},{\"t\":341,\"v\":31},{\"t\":342,\"v\":26},{\"t\":343,\"v\":27},{\"t\":344,\"v\":29},{\"t\":345,\"v\":27},{\"t\":346,\"v\":27},{\"t\":347,\"v\":31},{\"t\":348,\"v\":28},{\"t\":349,\"v\":30},{\"t\":350,\"v\":30},{\"t\":351,\"v\":30},{\"t\":352,\"v\":25},{\"t\":353,\"v\":28},{\"t\":354,\"v\":30},{\"t\":355,\"v\":29},{\"t\":356,\"v\":30},{\"t\":357,\"v\":30},{\"t\":358,\"v\":29},{\"t\":359,\"v\":31},{\"t\":360,\"v\":31},{\"t\":361,\"v\":27},{\"t\":362,\"v\":28},{\"t\":363,\"v\":32},{\"t\":364,\"v\":28},{\"t\":365,\"v\":29},{\"t\":366,\"v\":27},{\"t\":367,\"v\":25},{\"t\":368,\"v\":27},{\"t\":369,\"v\":32},{\"t\":370,\"v\":26},{\"t\":371,\"v\":29},{\"t\":372,\"v\":26},{\"t\":373,\"v\":28},{\"t\":374,\"v\":27},{\"t\":375,\"v\":29},{\"t\":376,\"v\":29},{\"t\":377,\"v\":29},{\"t\":378,\"v\":27},{\"t\":379,\"v\":26},{\"t\":380,\"v\":29},{\"t\":381,\"v\":28},{\"t\":382,\"v\":31},{\"t\":383,\"v\":32},{\"t\":384,\"v\":29},{\"t\":385,\"v\":30},{\"t\":386,\"v\":28},{\"t\":387,\"v\":28},{\"t\":388,\"v\":27},{\"t\":389,\"v\":29},{\"t\":390,\"v\":31},{\"t\":391,\"v\":29},{\"t\":392,\"v\":31},{\"t\":393,\"v\":28},{\"t\":394,\"v\":27},{\"t\":395,\"v\":27},{\"t\":396,\"v\":31},{\"t\":397,\"v\":30},{\"t\":398,\"v\":31},{\"t\":399,\"v\":32},{\"t\":400,\"v\":28},{\"t\":401,\"v\":26},{\"t\":402,\"v\":28},{\"t\":403,\"v\":30},{\"t\":404,\"v\":30},{\"t\":405,\"v\":31},{\"t\":406,\"v\":31},{\"t\":407,\"v\":27},{\"t\":408,\"v\":29},{\"t\":409,\"v\":27},{\"t\":410,\"v\":26},{\"t\":411,\"v\":30},{\"t\":412,\"v\":28},{\"t\":413,\"v\":27},{\"t\":414,\"v\":30},{\"t\":415,\"v\":32},{\"t\":416,\"v\":32},{\"t\":417,\"v\":26},{\"t\":418,\"v\":23},{\"t\":419,\"v\":30},{\"t\":420,\"v\":32},{\"t\":421,\"v\":31},{\"t\":422,\"v\":27},{\"t\":423,\"v\":31},{\"t\":424,\"v\":28},{\"t\":425,\"v\":26},{\"t\":426,\"v\":33},{\"t\":427,\"v\":26},{\"t\":428,\"v\":28},{\"t\":429,\"v\":30},{\"t\":430,\"v\":26},{\"t\":431,\"v\":27},{\"t\":432,\"v\":27},{\"t\":433,\"v\":26},{\"t\":434,\"v\":32},{\"t\":435,\"v\":32},{\"t\":436,\"v\":31},{\"t\":437,\"v\":28},{\"t\":438,\"v\":28},{\"t\":439,\"v\":30},{\"t\":440,\"v\":32},{\"t\":441,\"v\":29},{\"t\":442,\"v\":30},{\"t\":443,\"v\":27},{\"t\":444,\"v\":30},{\"t\":445,\"v\":27},{\"t\":446,\"v\":28},{\"t\":447,\"v\":32},{\"t\":448,\"v\":30},{\"t\":449,\"v\":27},{\"t\":450,\"v\":29},{\"t\":451,\"v\":29},{\"t\":452,\"v\":27},{\"t\":453,\"v\":27},{\"t\":454,\"v\":32},{\"t\":455,\"v\":31},{\"t\":456,\"v\":33},{\"t\":457,\"v\":28},{\"t\":458,\"v\":28},{\"t\":459,\"v\":32},{\"t\":460,\"v\":31},{\"t\":461,\"v\":33},{\"t\":462,\"v\":30},{\"t\":463,\"v\":27},{\"t\":464,\"v\":29},{\"t\":465,\"v\":31},{\"t\":466,\"v\":29},{\"t\":467,\"v\":31},{\"t\":468,\"v\":27},{\"t\":469,\"v\":29},{\"t\":470,\"v\":28},{\"t\":471,\"v\":33},{\"t\":472,\"v\":31},{\"t\":473,\"v\":29},{\"t\":474,\"v\":29},{\"t\":475,\"v\":29},{\"t\":476,\"v\":31},{\"t\":477,\"v\":33},{\"t\":478,\"v\":30},{\"t\":479,\"v\":29},{\"t\":480,\"v\":30},{\"t\":481,\"v\":31},{\"t\":482,\"v\":31},{\"t\":483,\"v\":31},{\"t\":484,\"v\":31},{\"t\":485,\"v\":33},{\"t\":486,\"v\":29},{\"t\":487,\"v\":34},{\"t\":488,\"v\":34},{\"t\":489,\"v\":29},{\"t\":490,\"v\":29},{\"t\":491,\"v\":32},{\"t\":492,\"v\":33},{\"t\":493,\"v\":29},{\"t\":494,\"v\":32},{\"t\":495,\"v\":29},{\"t\":496,\"v\":33},{\"t\":497,\"v\":28},{\"t\":498,\"v\":33},{\"t\":499,\"v\":32},{\"t\":500,\"v\":32},{\"t\":501,\"v\":30},{\"t\":502,\"v\":33},{\"t\":503,\"v\":33},{\"t\":504,\"v\":28},{\"t\":505,\"v\":23},{\"t\":506,\"v\":26},{\"t\":507,\"v\":28},{\"t\":508,\"v\":28},{\"t\":509,\"v\":29},{\"t\":510,\"v\":29},{\"t\":511,\"v\":29},{\"t\":512,\"v\":31},{\"t\":513,\"v\":34},{\"t\":514,\"v\":29},{\"t\":515,\"v\":30},{\"t\":516,\"v\":31},{\"t\":517,\"v\":31},{\"t\":518,\"v\":32},{\"t\":519,\"v\":31},{\"t\":520,\"v\":30},{\"t\":521,\"v\":40},{\"t\":522,\"v\":32},{\"t\":523,\"v\":31},{\"t\":524,\"v\":29},{\"t\":525,\"v\":30},{\"t\":526,\"v\":28},{\"t\":527,\"v\":29},{\"t\":528,\"v\":32},{\"t\":529,\"v\":30},{\"t\":530,\"v\":30},{\"t\":531,\"v\":30},{\"t\":532,\"v\":32},{\"t\":533,\"v\":30},{\"t\":534,\"v\":32},{\"t\":535,\"v\":31},{\"t\":536,\"v\":33},{\"t\":537,\"v\":29},{\"t\":538,\"v\":34},{\"t\":539,\"v\":34},{\"t\":540,\"v\":31},{\"t\":541,\"v\":29},{\"t\":542,\"v\":34},{\"t\":543,\"v\":28},{\"t\":544,\"v\":29},{\"t\":545,\"v\":31},{\"t\":546,\"v\":29},{\"t\":547,\"v\":31},{\"t\":548,\"v\":30},{\"t\":549,\"v\":30},{\"t\":550,\"v\":34},{\"t\":551,\"v\":29},{\"t\":552,\"v\":29},{\"t\":553,\"v\":34},{\"t\":554,\"v\":29},{\"t\":555,\"v\":29},{\"t\":556,\"v\":32},{\"t\":557,\"v\":36},{\"t\":558,\"v\":34},{\"t\":559,\"v\":35},{\"t\":560,\"v\":32},{\"t\":561,\"v\":30},{\"t\":562,\"v\":34},{\"t\":563,\"v\":29},{\"t\":564,\"v\":36},{\"t\":565,\"v\":30},{\"t\":566,\"v\":35},{\"t\":567,\"v\":35},{\"t\":568,\"v\":32},{\"t\":569,\"v\":34},{\"t\":570,\"v\":34},{\"t\":571,\"v\":31},{\"t\":572,\"v\":34},{\"t\":573,\"v\":34},{\"t\":574,\"v\":29},{\"t\":575,\"v\":29},{\"t\":576,\"v\":32},{\"t\":577,\"v\":35},{\"t\":578,\"v\":35},{\"t\":579,\"v\":32},{\"t\":580,\"v\":30},{\"t\":581,\"v\":32},{\"t\":582,\"v\":29},{\"t\":583,\"v\":32},{\"t\":584,\"v\":32},{\"t\":585,\"v\":35},{\"t\":586,\"v\":34},{\"t\":587,\"v\":34},{\"t\":588,\"v\":34},{\"t\":589,\"v\":35},{\"t\":590,\"v\":35},{\"t\":591,\"v\":34},{\"t\":592,\"v\":29},{\"t\":593,\"v\":35},{\"t\":594,\"v\":34},{\"t\":595,\"v\":31},{\"t\":596,\"v\":34},{\"t\":597,\"v\":31},{\"t\":598,\"v\":34},{\"t\":599,\"v\":31}]}";
        try {
            writer.write(common);
            writer.flush();
        } catch (IOException e) {
            e.printStackTrace();
        }
        assertEquals(common, FileOperation.getStringFromRemoteFile("http://users.polytech.unice.fr/~logre/resources/temp2.senml"));
    }



    @After
    public void cleanUp() throws IOException {
        writer.close();
        file.delete();
    }

}
